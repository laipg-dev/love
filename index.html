<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>H√†nh Tr√¨nh K·ª∑ Ni·ªám</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary: #ff4d6d;
        --bg: #fff5f7;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        background: var(--bg);
        font-family: "Quicksand", sans-serif;
        overflow: hidden;
      }

      .phase {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        width: 100vw;
        position: fixed;
        inset: 0;
        padding: 20px;
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .hidden {
        opacity: 0;
        pointer-events: none;
        transform: scale(0.9);
      }

      h1 {
        font-family: "Dancing Script", cursive;
        color: var(--primary);
        font-size: 3rem;
        margin-bottom: 10px;
      }

      /* --- N√öT B·∫§M --- */
      .btn {
        padding: 15px 40px;
        border-radius: 50px;
        border: none;
        font-weight: bold;
        cursor: pointer;
        background: var(--primary);
        color: white;
        transition: 0.3s;
        box-shadow: 0 10px 20px rgba(255, 77, 109, 0.3);
      }
      .btn:hover {
        transform: scale(1.05);
      }

      /* --- M√ÄN 1: POLAROID L·ªöN & T√ÇM S·ª∞ --- */
      #memory-modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.9);
        display: none;
        z-index: 2000;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(10px);
      }
      .polaroid-large {
        background: white;
        padding: 20px 20px 50px;
        width: 90%;
        max-width: 450px;
        transform: rotate(-1deg);
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
        animation: slideUp 0.5s ease-out;
      }
      .polaroid-large img {
        width: 100%;
        height: 350px;
        object-fit: cover;
        border-radius: 4px;
      }
      .polaroid-text {
        font-family: "Dancing Script", cursive;
        font-size: 1.8rem;
        margin-top: 25px;
        color: #333;
        line-height: 1.4;
        padding: 0 10px;
      }

      /* --- M√ÄN 2: THI·ªÜP M·ªúI 2 B√äN --- */
      .invitation-container {
        display: flex;
        background: white;
        border-radius: 25px;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        width: 100%;
        max-width: 900px;
        min-height: 500px;
      }
      .invitation-left {
        flex: 1.3;
        background: #fafafa;
        border-right: 1px solid #eee;
      }
      .slideshow-container {
        height: 350px;
        position: relative;
      }
      .mySlides img {
        width: 100%;
        height: 350px;
        object-fit: cover;
      }
      .invitation-right {
        flex: 1;
        padding: 40px;
        text-align: left;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .info-item {
        text-decoration: none;
        color: inherit;
        margin-bottom: 20px;
        display: block;
      }
      .info-item b {
        color: var(--primary);
        font-size: 0.8rem;
        text-transform: uppercase;
        display: block;
        margin-bottom: 5px;
      }

      /* --- M√ÄN 3: H·ªòP QU√Ä --- */
      .gift-instruction {
        font-size: 1.4rem;
        color: var(--primary);
        margin-bottom: 30px;
        animation: pulse 1.5s infinite;
      }
      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
          transform: scale(1);
        }
        50% {
          opacity: 0.7;
          transform: scale(1.05);
        }
      }

      /* --- HI·ªÜU ·ª®NG PH√ÅO HOA TIM --- */
      .explosion-heart {
        position: fixed;
        pointer-events: none;
        z-index: 9999;
        animation: explode 1.2s ease-out forwards;
      }
      @keyframes explode {
        0% {
          transform: translate(-50%, -50%) scale(0);
          opacity: 1;
        }
        100% {
          transform: translate(var(--tx), var(--ty)) scale(1.2);
          opacity: 0;
        }
      }

      @media (max-width: 768px) {
        .invitation-container {
          flex-direction: column;
          max-width: 380px;
          height: auto;
        }
        .phase {
          overflow-y: auto;
          justify-content: flex-start;
          padding-top: 40px;
        }
        .polaroid-large img {
          height: 280px;
        }
      }
    </style>
  </head>
  <body>
    <div id="phase0" class="phase">
      <h1>G·ª≠i Em iuu... ‚ù§Ô∏è</h1>
      <p>Anh c√≥ ƒëi·ªÅu b·∫•t ng·ªù d√†nh cho Em n√®. Xem nh√©?</p>
      <div
        style="margin-top: 20px; position: relative; display: flex; gap: 20px"
      >
        <button class="btn" onclick="nextPhase(1)">ƒê·ªìng √Ω lu√¥n ‚ù§Ô∏è</button>
        <button id="noBtn" class="btn" style="background: #adb5bd">
          H√¥ng nha üòú
        </button>
      </div>
    </div>

    <div id="phase1" class="phase hidden">
      <h1>K√Ω ·ª®c ‚ú®</h1>
      <p>Ch·∫°m v√†o nh·ªØng tr√°i tim ƒëang bay ƒë·ªÉ l·∫Øng nghe anh n√≥i...</p>
      <div
        id="progress"
        style="font-weight: bold; color: var(--primary); font-size: 1.5rem"
      >
        0 / 5
      </div>
    </div>

    <div id="phase2" class="phase hidden">
      <div class="invitation-container">
        <div class="invitation-left">
          <div class="slideshow-container">
            <div class="mySlides"><img src="8.jpg" /></div>
            <div class="mySlides"><img src="9.jpg" /></div>
            <div class="mySlides"><img src="10.jpg" /></div>
            <button
              style="position: absolute; left: 10px; top: 50%"
              onclick="plusSlides(-1)"
            >
              ‚ùÆ
            </button>
            <button
              style="position: absolute; right: 10px; top: 50%"
              onclick="plusSlides(1)"
            >
              ‚ùØ
            </button>
          </div>
          <div
            style="
              padding: 20px;
              font-size: 0.9rem;
              color: #666;
              font-style: italic;
              text-align: left;
            "
          >
            "M·ªôt kh√¥ng gian Rooftop m·ªü tho√°ng ƒë√£ng v·ªõi vibe nh·∫°c lo-fi nh·∫π nh√†ng
            v√† hi·ªán ƒë·∫°i. ƒê√¢y l√† n∆°i c·ª±c k·ª≥ l√Ω t∆∞·ªüng ƒë·ªÉ ch√∫ng m√¨nh 'chill' c√πng
            nhau, th∆∞·ªüng th·ª©c nh·ªØng ly Cocktail Signature v√† nh·ªØng m√≥n ƒÉn √Å-√Çu
            tinh t·∫ø."
          </div>
        </div>
        <div class="invitation-right">
          <a
            href="https://maps.app.goo.gl/FrF2DXGkY9TnABzw9"
            target="_blank"
            class="info-item"
          >
            <b>üìç ƒê·ªãa ƒëi·ªÉm (Nh·∫•n ƒë·ªÉ xem ƒë∆∞·ªùng ƒëi)</b>
            Cloud Twelve Kitchen Bar
          </a>
          <div class="info-item">
            <b>‚è∞ Th·ªùi gian</b> 18h30 - Th·ª© 7 tu·∫ßn n√†y‚ù§Ô∏è
          </div>
          <div class="info-item">
            <b>üëó Dresscode</b> Em m·∫∑c g√¨ c≈©ng ƒë·∫πp h·∫øtüíï! T·ªëi nay anh c≈©ng s·∫Ω
            c·ªüi h·∫øt thuiii.üòç
          </div>
          <div
            style="
              font-family: &quot;Dancing Script&quot;;
              font-size: 1.6rem;
              color: #333;
              margin-top: 15px;
              border-top: 1px dashed #ccc;
              pt: 15px;
            "
          >
            Anh mu·ªën c√πng em t·∫≠n h∆∞·ªüng m·ªôt bu·ªïi t·ªëi 'ƒë√°ng chill' nh·∫•t, n∆°i kh√¥ng
            gian v√† √¢m nh·∫°c h√≤a quy·ªán ƒë·ªÉ ch√∫ng ta c√≥ th·ªÉ tho·∫£i m√°i t√¢m s·ª±. Em
            ƒë·ªìng √Ω ƒëi c√πng Anh ch·ª©?
          </div>
        </div>
      </div>
      <button class="btn" style="margin-top: 25px" onclick="nextPhase(3)">
        Em ƒë·ªìng √Ω nh·∫≠n thi·ªáp ‚ù§Ô∏è
      </button>
    </div>

    <div id="phase3" class="phase hidden">
      <div class="gift-instruction">Ch∆∞a h·∫øt ƒë√¢u. H√£y m·ªü h·ªôp ra ƒëi‚ú®</div>
      <div
        style="
          font-size: 120px;
          cursor: pointer;
          animation: bounce 1.5s infinite;
        "
        onclick="openGift()"
      >
        üéÅ
      </div>
    </div>

    <div id="phase4" class="phase hidden">
      <h1 style="font-family: &quot;Dancing Script&quot;">
        ƒê√£ ƒë·ªÉ em ƒë·ª£i l√¢uu ‚ù§Ô∏è
      </h1>
      <div
        style="
          background: white;
          padding: 15px;
          border-radius: 20px;
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
          width: 90%;
          max-width: 400px;
        "
      >
        <img src="lac.png" style="width: 100%; border-radius: 15px" />
        <p
          style="
            font-family: &quot;Dancing Script&quot;;
            font-size: 1.8rem;
            margin-top: 15px;
            color: var(--primary);
          "
        >
          M√£i y√™u em!
        </p>
      </div>
    </div>

    <div id="memory-modal" onclick="closeModal()">
      <div class="polaroid-large" onclick="event.stopPropagation()">
        <img src="" id="modal-img" />
        <div class="polaroid-text" id="modal-text"></div>
      </div>
    </div>

    <script>
      const memories = [
        {
          img: "3.jpg",
          text: "Nh√¨n l·∫°i h√†nh tr√¨nh m√† ch√∫ng ta ƒë√£ ƒëi qua c√πng nhau, ƒë√≥ th·∫≠t s·ª± l√† qu√£ng ƒë∆∞·ªùng d√†i. Nh·ªù v√†o nh·ªØng ng√†y ƒëi gym m√† ta g·∫ßn nhau h∆°n. Nh∆∞ng ƒë√≥ l√† l√∫c anh ƒë√£ b·∫Øt ƒë·∫ßu th√≠ch em khi n√†o m√† kh√¥ng hay. Ng∆∞·ªùi m√† anh c√≤n kh√¥ng nghƒ© s·∫Ω ƒëi c√πng anh xa ƒë·∫øn v·∫≠y.",
        },
        {
          img: "7.jpg",
          text: "Anh ƒë√£ tr·∫£i qua r·∫•t nhi·ªÅu ƒëi·ªÅu c√πng em v√† c√≥ c√πng nhau r·∫•t nhi·ªÅu k·ª∑ ni·ªám ƒë√°ng nh·ªõ. T·ª´ bu·ªïi h·∫πn h√≤ ƒë·∫ßu ti√™n l√† anh bi·∫øt em ƒë√£ cho anh c∆° h·ªôi ƒë·ªÉ ƒë∆∞·ª£c b√™n em, d√π t∆∞∆°ng lai ph√≠a tr∆∞·ªõc c·ªßa m√¨nh kh√¥ng h·ªÅ c√≥ hi v·ªçng...",
        },
        {
          img: "2.jpg",
          text: '...Trong qu√° tr√¨nh "m·∫≠p m·ªù" v√† ƒë·∫øn khi ·ªü b√™n nhau. Ta c√≥ nh·ªØng l·∫ßn t∆∞·ªüng tr·ª´ng d·ª´ng l·∫°i nh∆∞ng r·ªìi l·∫°i ti·∫øp t·ª•c. Anh bi·∫øt em ƒë√£ ch·ªãu ƒë·ª±ng r·∫•t nhi·ªÅu ƒëi·ªÅu t·ªìi t·ªá v√† nhi·ªÅu thi·ªát th√≤i khi quen ng∆∞·ªùi nh∆∞ anh. Nh∆∞ng s√¢u b√™n trong anh v·∫´n lu√¥n mu·ªën c·ªë g·∫Øng cho em nh·ªØng ƒëi·ªÅu t·ªët nh·∫•t c√≥ th·ªÉ. ',
        },
        {
          img: "5.jpg",
          text: "C√≥ th·ªÉ em ƒë·ªÉ √Ω ho·∫∑c kh√¥ng nh∆∞ng anh v·∫´n lu√¥n th·∫ßm l·∫∑ng y√™u em t·ª´ng ng√†y. Anh lu√¥n mu·ªën ƒë∆∞·ª£c chƒÉm s√≥c v√† b·∫£o v·ªá em, d√π cho c√≥ chuy·ªán g√¨ x·∫£y ra ƒëi n·ªØa. Anh bi·∫øt anh kh√¥ng ho√†n h·∫£o, anh c√≥ r·∫•t nhi·ªÅu khuy·∫øt ƒëi·ªÉm v√† nh·ªØng ƒëi·ªÅu ch∆∞a t·ªët. Nh∆∞ng anh v·∫´n lu√¥n mong mu·ªën ƒë∆∞·ª£c c√πng em v∆∞·ª£t qua t·∫•t c·∫£ ƒë·ªÉ x√¢y d·ª±ng m·ªôt t∆∞∆°ng lai th·∫≠t ƒë·∫πp ƒë·∫Ω b√™n nhau.",
        },
        {
          img: "1.jpg",
          text: "C·∫£m ∆°n em v√¨ ƒë√£ quay l·∫°i b√™n anh. ƒê√¢y s·∫Ω l√† l·∫ßn cu·ªëi anh ƒë·ªÉ em r·ªùi ƒëi",
        },
      ];

      let clickCount = 0;
      let slideIndex = 1;

      // --- N√öT T·ª™ CH·ªêI NH·∫¢Y LUNG TUNG ---
      const noBtn = document.getElementById("noBtn");
      noBtn.addEventListener("mouseover", () => {
        const x = Math.random() * (window.innerWidth - 120);
        const y = Math.random() * (window.innerHeight - 50);
        noBtn.style.position = "fixed";
        noBtn.style.left = x + "px";
        noBtn.style.top = y + "px";
      });

      function nextPhase(p) {
        document
          .querySelectorAll(".phase")
          .forEach((el) => el.classList.add("hidden"));
        document.getElementById(`phase${p}`).classList.remove("hidden");
        if (p === 1) startHearts();
        if (p === 2) showSlides(1);
      }

      function startHearts() {
        const int = setInterval(() => {
          if (clickCount >= 5) {
            clearInterval(int);
            return;
          }
          const h = document.createElement("div");
          h.innerHTML = "‚ù§Ô∏è";
          h.style.cssText = `position:fixed; bottom:-50px; left:${Math.random() * 90}vw; font-size:50px; cursor:pointer; animation: fly 7s linear forwards;`;
          h.onclick = () => {
            document.getElementById("modal-img").src = memories[clickCount].img;
            document.getElementById("modal-text").innerText =
              memories[clickCount].text;
            document.getElementById("memory-modal").style.display = "flex";
            clickCount++;
            document.getElementById("progress").innerText = `${clickCount} / 5`;
          };
          document.body.appendChild(h);
        }, 1000);
      }

      function closeModal() {
        document.getElementById("memory-modal").style.display = "none";
        if (clickCount >= 5) setTimeout(() => nextPhase(2), 800);
      }

      function openGift() {
        const music = document.getElementById("giftMusic");
        music.play(); // K√≠ch ho·∫°t ph√°t nh·∫°c

        const box = document.getElementById("gift-box");
        box.style.transform = "scale(0)";

        // Hi·ªáu ·ª©ng ph√°o hoa tim (gi·ªØ nguy√™n code c≈© c·ªßa b·∫°n)
        for (let i = 0; i < 40; i++) {
          const h = document.createElement("div");
          h.className = "explosion-heart";
          h.innerHTML = "‚ù§Ô∏è";
          h.style.left = "50vw";
          h.style.top = "50vh";
          h.style.setProperty("--tx", `${(Math.random() - 0.5) * 500}px`);
          h.style.setProperty("--ty", `${(Math.random() - 0.5) * 500}px`);
          document.body.appendChild(h);
        }
        setTimeout(() => nextPhase(4), 1000);
      }

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }
      function showSlides(n) {
        let s = document.getElementsByClassName("mySlides");
        if (n > s.length) slideIndex = 1;
        if (n < 1) slideIndex = s.length;
        for (let i = 0; i < s.length; i++) s[i].style.display = "none";
        s[slideIndex - 1].style.display = "block";
      }

      const s = document.createElement("style");
      s.innerText = `@keyframes fly { to { transform: translateY(-110vh) rotate(360deg); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        @keyframes slideUp { from { transform: translateY(100px) rotate(5deg); opacity: 0; } to { transform: translateY(0) rotate(-1deg); opacity: 1; } }`;
      document.head.appendChild(s);
    </script>
  </body>
  <audio id="giftMusic">
    <source src="nhac-mo-qua.mp3" type="audio/mpeg" />
  </audio>
</html>
